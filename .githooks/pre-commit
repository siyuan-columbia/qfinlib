#!/bin/bash
# Git pre-commit hook
# This runs automatically before each commit

# Get the directory of this script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"

cd "$PROJECT_ROOT"

# Run the pre-commit script
if [ -f "$PROJECT_ROOT/pre-commit.sh" ]; then
    bash "$PROJECT_ROOT/pre-commit.sh"
    exit_code=$?
    if [ $exit_code -ne 0 ]; then
        echo ""
        echo "Pre-commit checks failed. Please fix the issues above."
        echo "To skip this hook, use: git commit --no-verify"
        exit $exit_code
    fi
else
    echo "Warning: pre-commit.sh not found. Skipping pre-commit checks."
fi

exit 0

